// Package {{.PackageName}} 自动生成模板 {{.StructName}}Dao
// @description <TODO description class purpose>
// @author {{.Author}}
// @File: {{.FileName}}
// @version 1.0.0
// @create {{.DateTime}}
package {{.PackageName}}

import (
    "{{.ImportPath}}/common"
    "{{.ImportPath}}/global"
)

// {{.StructName}}Dao 结构体

type {{.StructName}}Dao struct { }

// Create 创建{{.StructName}}记录
// Author {{.Author}}
func (dao *{{.StructName}}Dao) Create({{.ObjectName}} {{.StructName}}) (err error) {
    err = global.GOrmDao.Create(&{{.ObjectName}}).Error
    return err
}

// Delete 删除{{.StructName}}记录
// Author {{.Author}}
func (dao *{{.StructName}}Dao) Delete(id string) (err error) {
    err = global.GOrmDao.Delete(&[]{{.StructName}}{}, "id = ?", id).Error
    return err
}

// DeleteByIds 批量删除{{.StructName}}记录
// Author {{.Author}}
func (dao *{{.StructName}}Dao) DeleteByIds(ids []string) (err error) {
    err = global.GOrmDao.Delete(&[]{{.StructName}}{}, "id in ?", ids).Error
    return err
}

// Update 更新{{.StructName}}记录
// Author {{.Author}}
func (dao *{{.StructName}}Dao) Update({{.ObjectName}} {{.StructName}}) (err error) {
    err = global.GOrmDao.Save(&{{.ObjectName}}).Error
    return err
}

// Get 根据id获取{{.StructName}}记录
// Author {{.Author}}
func (dao *{{.StructName}}Dao) Get(id string) (err error, {{.ObjectName}} *{{.StructName}}) {
    err = global.GOrmDao.Where("id = ?", id).First(&{{.ObjectName}}).Error
    return
}

// List 分页获取{{.StructName}}记录
// Author {{.Author}}
func (dao *{{.StructName}}Dao) List(param *{{.StructName}}, page *common.PageInfo) (err error, datas *[]{{.StructName}}, total int64) {
    // 创建model
    model := global.GOrmDao.Model(&{{.StructName}}{})
    // 如果有条件搜索 下方会自动创建搜索语句
    //if param.Id != "" {
    //	model = model.Where("ID = ?", info.Id)
    //}

    err = model.Count(&total).Error
    if err != nil {
        return
    }
    // 计算分页信息
    page.Calculate()
    // 生成排序信息
    if page.OrderByColumn != "" {
        model.Order(page.OrderByColumn + " " + page.IsAsc + " ")
    }
    var tmp []{{.StructName}}
    err = model.Limit(page.Limit).Offset(page.Offset).Find(&tmp).Error
    datas = &tmp
    return err, datas, total
}